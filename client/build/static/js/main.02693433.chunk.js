(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{228:function(e,t){},229:function(e,t){},236:function(e,t,n){e.exports=n(570)},241:function(e,t,n){},565:function(e,t){},570:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(26),c=n.n(o),s=(n(241),n(3)),i=n(4),l=n(6),u=n(5),h=n(7),p=n(573),m=n(576),d=n(572),g=n(15),f=n(32),b=n(17),v=n(231),O=n(21),E=n.n(O),j=(n(284),n(285),n(218)),C=n.n(j),y=n(235),k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(b.a)(Object(b.a)(n))),n.handleOptionChange=n.handleOptionChange.bind(Object(b.a)(Object(b.a)(n))),n.handleChangeNumber=n.handleChangeNumber.bind(Object(b.a)(Object(b.a)(n))),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=t.multi,o=t.noResultsText,c=t.onChange,s=t.readonly,i=t.multiOptionsValue,l=t.readOnly,u=t.options,h=(t.validation,t.optionValue),p=(t.placeHolder,t.withPortal),m=t.isInvalid,d=(t.errorMsg,t.multiSelectOptions),g=t.placeholder,b=Object(f.a)(t,["type","multi","noResultsText","onChange","readonly","multiOptionsValue","readOnly","options","validation","optionValue","placeHolder","withPortal","isInvalid","errorMsg","multiSelectOptions","placeholder"]);return"date"===n?r.a.createElement(v.a,{readOnly:!!s,disabled:!!s,className:"".concat(s?"successInput":""),withPortal:!!p,selected:this.props.value||E()(),locale:"cs",onChange:c,peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0}):"dropdown"===n?r.a.createElement("select",Object.assign({className:"input-style ".concat(m||""),onChange:this.handleChange},b),u.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)})):"email"===n?r.a.createElement("input",Object.assign({className:"input-style ".concat(m||""," ").concat(s?"successInput":""),type:n||"text",readOnly:!!s,onChange:this.handleChange},b)):"checkbox"===n?r.a.createElement("input",Object.assign({readOnly:!!s,checked:this.props.value||!1,type:n,onChange:s?{}:function(e){return c(e.target.checked)}},b)):"radio"===n?r.a.createElement("input",Object.assign({checked:this.props.value===h,type:n,onChange:function(t){return e.handleOptionChange(t,h)}},b)):"positiveNumber"===n?r.a.createElement("input",Object.assign({className:"input-style ".concat(this.props.isInvalid),type:"text",onChange:this.handleChangeNumber},b)):"select"===n?r.a.createElement(y.a,{name:"filters",placeholder:g,options:d,onChange:function(e){return c(e)},isSearchable:!0,classNamePrefix:"react-select",className:"react-select-container  ".concat(m||""),value:i,multi:a,noResultsText:o}):r.a.createElement("input",Object.assign({readOnly:!(!l&&!s),className:"input-style  ".concat(m||""," ").concat(s?"successInput":""),type:n||"text",onChange:this.handleChange},b))}},{key:"handleOptionChange",value:function(e,t){var n=this.props.onChange;e.target.checked&&n(t)}},{key:"handleChange",value:function(e){var t=e.target.value;console.log(t);var n=this.props,a=n.onChange,r=n.validation;r&&!r(t)||a(t)}},{key:"handleChangeNumber",value:function(e){var t=e.target.value,n=this.props.onChange;C.a.isInt(t)&&t>=0?n(Number(t)):""===t&&n(t)}}]),t}(a.Component),w=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props,o=n.name,c=n.rawValue,s=n.beforeRawValue,i=n.outer,l=(n.inner,n.errorMsg),u=n.afterRawValue,h=n.labelClass,p=Object(f.a)(n,["name","rawValue","beforeRawValue","outer","inner","errorMsg","afterRawValue","labelClass"]);return e=this.props.outer?r.a.createElement("span",{className:i},r.a.createElement(k,p),this.props.inner):r.a.createElement(k,p),r.a.createElement(a.Fragment,null,r.a.createElement("label",{onClick:function(e){return"date"===t.props.type?e.preventDefault(e):{}},className:"label-style ".concat(void 0!==h?h:"")},s,r.a.createElement("span",null,o),e,c),l?r.a.createElement("div",{className:"errorMsg"},l):null,u)}}]),t}(a.Component),S=n(129),D=n.n(S),N=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).generateInput=n.generateInput.bind(Object(b.a)(Object(b.a)(n))),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:this.props.class,onSubmit:function(e){return e.preventDefault()}},this.props.schema.map(this.generateInput))}},{key:"generateInput",value:function(e){var t=this.props,n=t.onChange,a=t.formData,o=e.path,c=(e.pk,Object(f.a)(e,["path","pk"]));return"raw"===e.type?e.value:r.a.createElement(w,Object.assign({},c,{key:o+(e.optionValue||""),value:D.a.get(a,o),onChange:function(t){return n(D.a.set(a,e.path,t))}}))}}]),t}(a.Component),x=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.t,e.formData),n=e.onChange,a=e.action;return r.a.createElement("div",{className:"mt-30 mb-30 panel panel-default"},r.a.createElement("div",{className:"outer"},r.a.createElement(N,{formData:t,onChange:n,schema:[{name:"name",path:"name"},{name:"email",path:"email",type:"email"},{name:"password",path:"password",type:"password"},{name:"password2",path:"password2",type:"password"}]}),r.a.createElement("button",{onClick:function(){a()}}," ","register"," ")))}}]),t}(a.Component),M=n(13),R=n.n(M),I=function(e){return{type:"ERROR_RECEIVED",error:e}},_={getUsersList:function(){return function(e){R.a.get("/api/users/usersList/").then(function(t){return e({type:"USERS_LIST_RECEIVED",users:t})}).catch(function(e){return console.log(e)})}}},B=function(e,t,n){return function(t){R.a.post("/api/users/register/",{name:e.name,password:e.password,password2:e.password2,email:e.email,userType:"0",location:e.location}).then(function(){return t(function(e){return{type:"REGISTRATION_RECEIVED",registartionAction:e}}(n))}).catch(function(e){return t(I(e.response.data))})}},U=n(575),L=n(574),A=n(48),T=n(222),P=Object(A.withScriptjs)(Object(A.withGoogleMap)(function(e){return r.a.createElement(A.GoogleMap,{defaultZoom:14,center:e.center},r.a.createElement(T.SearchBox,{ref:e.onSearchBoxMounted,bounds:e.bounds,controlPosition:window.google.maps.ControlPosition.TOP_LEFT,onPlacesChanged:e.onPlacesChanged,inputPlaceholder:"Customized your placeholder",inputStyle:{boxSizing:"border-box",MozBoxSizing:"border-box",border:"1px solid transparent",width:"240px",height:"32px",marginTop:"27px",padding:"0 12px",borderRadius:"1px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",fontSize:"14px",outline:"none",textOverflow:"ellipses"}},r.a.createElement("input",{type:"text",placeholder:"Find Place",style:{boxSizing:"border-box",border:"1px solid transparent",width:"240px",height:"32px",marginTop:"27px",padding:"0 12px",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",fontSize:"14px",outline:"none",textOverflow:"ellipses"}})),void 0!==e.locations?e.locations.map(function(t,n){return r.a.createElement(A.Marker,{onClick:function(){return e.click(n)},position:{lat:Number(e.locations[n][0]),lng:Number(e.locations[n][1])}},void 0!==e.displayInfo&&e.displayInfo===n?r.a.createElement(A.InfoWindow,null,r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.redirectToProfile(e.locations[n][2].name,e.locations[n][2]._id)}},e.locations[n][2].name)):null)}):r.a.createElement(A.Marker,{ref:e.onMarkerMounted,onPositionChanged:e.onPositionChanged,position:e.center}))})),V=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={bounds:null,center:{lat:50.29449229999999,lng:18.67138019999993},markers:[],lat:"",lng:"",serched:!1},n.handleMapMounted=n.handleMapMounted.bind(Object(b.a)(Object(b.a)(n))),n.handleBoundsChanged=n.handleBoundsChanged.bind(Object(b.a)(Object(b.a)(n))),n.handleSearchBoxMounted=n.handleSearchBoxMounted.bind(Object(b.a)(Object(b.a)(n))),n.handlePlacesChanged=n.handlePlacesChanged.bind(Object(b.a)(Object(b.a)(n))),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleMapMounted",value:function(e){this._map=e}},{key:"componentDidUpdate",value:function(e){e.lat!==this.state.lat&&e.lng!==this.state.lng&&!0===this.state.serched&&void 0!==this.props.setLocation&&(this.props.setLocation(this.state.lat,this.state.lng),this.setState({serched:!1}))}},{key:"handleBoundsChanged",value:function(){this.setState({bounds:this._map.getBounds(),center:this._map.getCenter()})}},{key:"handleSearchBoxMounted",value:function(e){this._searchBox=e}},{key:"handlePlacesChanged",value:function(){var e=this._searchBox.getPlaces();this.setState({lat:(e[0].geometry.location||{}).lat(),lng:(e[0].geometry.location||{}).lng()});var t=e.map(function(e){return{position:e.geometry.location}}),n=t.length>0?t[0].position:this.state.center;this.setState({center:n,markers:t,serched:!0})}},{key:"render",value:function(){var e=this.props,t=(e.setLocation,Object(f.a)(e,["setLocation"]));return r.a.createElement(P,Object.assign({onMapMounted:this.handleMapMounted,onBoundsChanged:this.handleBoundsChanged,markers:this.state.markers,onSearchBoxMounted:this.handleSearchBoxMounted,bounds:this.state.bounds,center:this.state.center,onPlacesChanged:this.handlePlacesChanged,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyBj4blO0jFHddFGpPJA6bnFPw_QWpBL12U&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"600px",width:"600px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})},t))}}]),t}(a.Component),H=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).setLocation=function(e,t){n.setState({location:"(".concat(Number(e),",").concat(Number(t),")")})},n.register=function(){var e=Math.random();n.props.registerAction(n.state,n.props.history,e)},n.state={name:"",email:"",password:"",password2:"",redirect:!1,lat:"",lng:""},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){e.registartionAction!==this.props.registartionAction&&this.setState({redirect:!0})}},{key:"render",value:function(){var e=this;return console.log(this.state.location),r.a.createElement(a.Fragment,null,!0===this.state.redirect?r.a.createElement(L.a,{to:"/"}):null,r.a.createElement(x,{formData:this.state,onChange:function(t){return e.setState(t)},action:this.register}),r.a.createElement("div",null,this.state.location),r.a.createElement(V,{setLocation:this.setLocation}))}}]),t}(a.Component);var F=Object(U.a)(Object(g.b)(function(e){return{registartionAction:e.registartionAction}},function(e){return{registerAction:function(t,n,a){return e(B(t,n,a))}}})(H)),G=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(F,null)}}]),t}(a.Component),z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.t,e.formData),n=e.onChange,a=e.action;e.errors;return r.a.createElement("div",{className:"mt-30 mb-30 panel panel-default"},r.a.createElement("div",{className:"outer"},r.a.createElement(N,{formData:t,onChange:n,schema:[{name:"email",path:"email",type:"email"},{name:"password",path:"password",type:"password"}]}),r.a.createElement("div",{onClick:function(){return n({email:"qq@q.pl",password:"qq"})}},"qq"),r.a.createElement("div",{onClick:function(){return n({email:"w@w.pl",password:"ww"})}},"ww"),r.a.createElement("button",{onClick:function(){a()}}," ","register"," ")))}}]),t}(a.Component),K=function(e){e?R.a.defaults.headers.common.Authorization=e:delete R.a.defaults.headers.common.Authorization},W=n(127),q=n.n(W),J=n(30),Y=n(224),Z=n(225),Q=n(131),$=n(226),X=n.n($),ee=n(234),te=n(227),ne=n.n(te),ae=n(233),re=n(228),oe=n.n(re),ce=function(){return function(e){R.a.get("/api/books/").then(function(t){return e((n=t.data,console.log(n),{type:"BOOKS_RECEIVED",books:n}));var n}).catch(function(e){return console.log(e)})}},se={createBook:function(e,t){return function(n){console.log(e);var a=new FormData;a.append("title",e.title),a.append("author",e.author),a.append("description",e.description),a.append("isbn",e.isbn),a.append("image",e.image),a.append("created",t),console.log(a),R.a.post("/api/books/",a,"multipart/form-data").then(function(){return n(ce())}).catch(function(e){return n(I(e.response.data))})}},getBooksList:ce,updateBookStatus:function(e,t){return function(n){R.a.post("/api/books/"+e,{state:t}).then(function(e){return n(ce())}).catch(function(e){return console.log(e)})}}},ie=function(){return function(e){R.a.get("/api/chats/list/").then(function(t){return e({type:"CHAT_ROOMS_RECEIVED",chatRooms:t})}).catch(function(e){return console.log(e)})}},le={createRoom:function(e){return function(t){R.a.post("/api/chats/create/",{roomName:e}).then(function(e){return t(ie())}).catch(function(e){return console.log(e)})}},getChatRoomsList:ie,getChatDetails:function(e){return function(t){R.a.post("/chats/detail/"+e).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},sendMsg:function(e,t){return function(n){console.log(e,t),R.a.post("/api/chats/newmessage",e).then(function(e){return n({type:"ADD_MESSAGE",messages:e.data})}).catch(function(e){return console.log(e)})}},getMessages:function(e){return function(t){R.a.get("/api/chats/messages/"+e).then(function(e){return t((n=e,console.log(n.data),{type:"MESSAGES_RECEIVED",messages:n.data}));var n}).catch(function(e){return console.log(e)})}},receiveSocket:function(e){return console.log(e),{type:"RECEIVE_SOCKET",socketID:e}}},ue="CHANGE_CHANNEL";var he=function(){return function(e){R.a.get("/api/channel/list").then(function(t){return e({type:"CHANNELS_RECEIVED",channels:t})}).catch(function(e){return console.log(e)})}},pe={createChannel:function(e){return function(t){R.a.post("/api/channel/new_channel",{name:e}).then(function(e){return t(he())}).catch(function(e){return console.log(e)})}},getChannels:he,changeChannel:function(e){return{type:ue,channel:e}}};var me=n(229),de=n.n(me),ge={key:"root",storage:X.a},fe=Object(J.createStore)(Object(Q.a)(ge,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=e,r=0;r<t.length;r++)a=(0,t[r])(a,n);return a}}(Object(J.combineReducers)({error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_RECEIVED":var n=ne.a.camelizeKeys(t.error);return Object(ee.a)({},e,{error:n});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(ae.a)(e).concat([t.user]);case Oe:return t.user;default:return e}},currentUser:oe.a,users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LIST_RECEIVED":return t.users.data;default:return e}},registartionAction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTRATION_RECEIVED":return t.registartionAction;default:return e}},books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOKS_RECEIVED":return t.books;default:return e}},book:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_RECEIVED":return t.book;default:return e}},chatRooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHAT_ROOMS_RECEIVED":return t.chatRooms;default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGES_RECEIVED":return console.log(e),t.messages;default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGE_RECEIVED":return t.message;default:return e}},socketID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_SOCKET":return t.socketID;default:return e}},channels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANNELS_RECEIVED":return console.log(e),t.channels.data;default:return e}},activeChannel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return{name:t.channel.name,id:t.channel._id};default:return e}},token:de.a}))),{token:null,error:[],user:[],currentUser:{},users:[],registartionAction:null,books:[],book:null,chatRooms:[],messages:[],message:{},socketID:null,channels:[],activeChannel:{}},Object(Y.composeWithDevTools)(Object(J.applyMiddleware)(Z.a))),be=Object(Q.b)(fe),ve="SET_CURRENT_USER",Oe="LOGOUT",Ee=function(e){return{type:ve,user:e}},je={logout:function(e){return function(t){localStorage.removeItem("jwtToken"),K(!1),t({type:Oe,user:[]}),e.push("/")}},login:function(e,t){return function(n){console.log(t),R.a.post("/api/users/login/",{password:e.password,email:e.email}).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),K(a);var r=q()(a);n(Ee(r)),t.push({pathname:"/"+r.id,state:{user:r.id}})}).catch(function(e){return n(I(e))})}},getCurrentUser:function(e){return function(t){R.a.get("/api/users/current/"+e).then(function(e){return t(Ee(e))}).catch(function(e){return console.log(e)})}}},Ce=n(90),ye=n.n(Ce),ke=(ye()(),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).login=function(){n.props.login(n.state,n.props.history)},n.state={name:"",email:"",password:"",errors:{}},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.errors!==e.errors&&this.setState({errors:this.props.errors})}},{key:"render",value:function(){var e=this;return r.a.createElement(a.Fragment,null,r.a.createElement(z,{errors:this.state.errors,formData:this.state,onChange:function(t){return e.setState(t)},action:this.login}))}}]),t}(a.Component));var we=Object(U.a)(Object(g.b)(function(e){return{token:e.token,errors:e.error}},function(e){return{login:function(t,n){return e(je.login(t,n))}}})(ke)),Se=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(we,null)}}]),t}(a.Component),De=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.openChat,e.currentUser,e.match,Object(f.a)(e,["openChat","currentUser","match"]));return r.a.createElement(a.Fragment,null,r.a.createElement(V,t))}}]),t}(a.Component),Ne=Object(U.a)(De),xe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).click=function(e){n.setState(function(t){return{displayInfo:t.displayInfo===e?null:e}})},n.redirectToProfile=function(e,t){n.props.history.push({pathname:"profile/".concat(e),state:{id:t}})},n.openChat=function(){n.props.createChannel({name:"Lobby",id:0,private:!1})},n.state={action:null,redirect:!1,displayInfo:null},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsersList()}},{key:"componentDidUpdate",value:function(e){this.props.user!==e.user&&this.props.user}},{key:"render",value:function(){var e=this.props,t=e.users,n=e.match;return r.a.createElement(a.Fragment,null,r.a.createElement(Ne,{currentUser:this.props.user.user,openChat:this.openChat,locations:t.length>0?t.filter(function(e){return void 0!==e.location}).map(function(e,t){return e.location.slice(1,-1).split(",").concat(e)}):[],logout:this.props.logout,click:this.click,match:n,redirectToProfile:this.redirectToProfile,displayInfo:this.state.displayInfo}))}}]),t}(a.Component);var Me=Object(U.a)(Object(g.b)(function(e){return{token:e.token,user:e.user,users:e.users,registartionAction:e.registartionAction}},function(e){return{getCurrentUser:function(){return e(_.getCurrentUser())},logout:function(){return e(je.logout())},getUsersList:function(){return e(_.getUsersList())},createChannel:function(t){return e(pe.createChannel(t))}}})(xe)),Re=n(571),Ie=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.token&&this.props.getCurrentUser()}},{key:"render",value:function(){var e=this.props,t=(e.userName,e.currentUser),n=e.match;return r.a.createElement("nav",{className:"user-navbar navbar navbar-default"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("div",{className:"navbar-header"},r.a.createElement("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#navbar","aria-expanded":"false","aria-controls":"navbar"},r.a.createElement("span",{className:"glyphicon glyphicon-menu-hamburger"}))),r.a.createElement("div",{id:"navbar",className:"navbar-collapse collapse"},Object.keys(t||{}).length>0?r.a.createElement("ul",{className:"navLinks nav navbar-nav"},r.a.createElement("li",null,"name: ",(t||{}).name),r.a.createElement(Re.a,{to:"".concat(n.path).concat((t||{})._id)},"HOME"),r.a.createElement(Re.a,{to:"".concat(n.path).concat((t||{})._id,"/myBooks")},"my books"),r.a.createElement(Re.a,{to:"".concat(n.path).concat((t||{})._id,"/chat/")},"chat"),r.a.createElement(Re.a,{to:"".concat(n.path).concat((t||{})._id,"/planner/")},"planner"),r.a.createElement("li",{style:{cursor:"pointer"},onClick:this.props.logout},"logOut")):r.a.createElement("ul",{className:"nav navbar-nav button-holder"},r.a.createElement(Re.a,{to:"".concat(n.path,"login")},"Login"),r.a.createElement(Re.a,{to:"registration"},"Register"),r.a.createElement(Re.a,{to:"".concat(n.path,"chat")},"chat")))))))}}]),t}(a.Component),_e=Object(U.a)(Ie),Be=n(577),Ue=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsersList()}},{key:"render",value:function(){var e=this;return console.log(this.props.location.pathname.split("/")[1]),r.a.createElement(_e,{currentUser:this.props.user,logout:function(){return e.props.logout(e.props.history)}})}}]),t}(a.Component);var Le=Object(Be.a)(Object(g.b)(function(e,t){return{user:(e.users||[]).find(function(e){return e._id===t.location.pathname.split("/")[1]})}},function(e){return{logout:function(t){return e(je.logout(t))},getCurrentUser:function(t){return e(je.getCurrentUser(t))},getUsersList:function(){return e(_.getUsersList())}}})(Ue)),Ae=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){this.props.match;return r.a.createElement(a.Fragment,null,r.a.createElement(Re.a,{to:"/login"},"Login"),r.a.createElement(Re.a,{to:"registration"},"Register"),r.a.createElement(Me,{action:(this.props.location.state||{}).action}))}}]),t}(a.Component),Te=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.props.match),r.a.createElement("div",{className:"userPage",style:{padding:"0px"}},r.a.createElement(Le,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("div",{className:"content-holder"},this.props.children)))))}}]),t}(a.Component),Pe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.formData,n=e.onChange,a=e.imageSelectedHandler,o=e.action,c=e.books;return console.log(c),r.a.createElement("div",null,r.a.createElement(N,{formData:t,onChange:n,schema:[{name:"title",path:"title"},{name:"author",path:"author"},{name:"description",path:"description"},{name:"isbn",path:"isbn"}]}),r.a.createElement("div",{className:"imgUploadContainer"},r.a.createElement("span",null,"uploadImage"),r.a.createElement("label",{htmlFor:"file-upload",className:"custom-file-upload"},r.a.createElement("input",{id:"file-upload",type:"file",name:"image",onChange:a}))),r.a.createElement("button",{onClick:o},"create"),r.a.createElement("div",null,c?c.map(function(e){return r.a.createElement("div",null,r.a.createElement("div",null,"title:",e.title),r.a.createElement("div",null,"description:",e.description),r.a.createElement("img",{style:{width:"200px"},src:"http://localhost:5000/api/books/".concat((e.image||{}).filename)}))}):null))}}]),t}(a.Component),Ve=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).imageSelectedHandler=function(e){n.setState({image:e.target.files[0]})},n.createBook=function(){n.props.createBook(n.state,new Date)},n.state={title:"",author:"",description:"",isbn:"",image:""},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getBooksList(),this.props.getCurrentUser()}},{key:"render",value:function(){var e=this,t=this.props.books;return console.log(t),r.a.createElement(Pe,{formData:this.state,books:t,onChange:function(t){return e.setState(t)},action:this.createBook,imageSelectedHandler:this.imageSelectedHandler})}}]),t}(a.Component);var He=Object(g.b)(function(e,t){return console.log(t),{registartionAction:e.registartionAction,books:e.books.filter(function(e){return e.user===t.location.pathname.split("/")[1]}),book:e.book,user:e.user}},function(e){return{createBook:function(t,n){return e(se.createBook(t,n))},getBooksList:function(t){return e(se.getBooksList(t))},getCurrentUser:function(t){return e(je.getCurrentUser(t))}}})(Ve),Fe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("sfjfkdj"),r.a.createElement(He,{location:this.props.location})}}]),t}(a.Component),Ge=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("div",null,(e||{}).books?(e||{}).books.map(function(e){return r.a.createElement("div",null,r.a.createElement("div",null,"title:",e.title),r.a.createElement("div",null,"description:",e.description),r.a.createElement("img",{style:{width:"200px"},src:"http://localhost:5000/api/books/".concat((e.image||{}).filename)}))}):null)}}]),t}(a.Component),ze=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user;return console.log(e),r.a.createElement(Ge,{user:e})}}]),t}(a.Component);var Ke=Object(g.b)(function(e,t){return{user:e.users.find(function(e){return e._id===t.userId})}},function(e){return{}})(ze),We=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(Ke,{userId:(this.props.location.state||{}).id})}}]),t}(a.Component),qe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.formData,n=e.onChange,a=e.action,o=(e.chatRooms,e.messages),c=e.createChannel,s=e.channels,i=e.changeChannel,l=e.activeChannel;return console.log(o),r.a.createElement("div",null,r.a.createElement("div",{className:"col-md-4"},r.a.createElement(N,{formData:t,onChange:n,schema:[{name:"roomName",path:"roomName"}]}),r.a.createElement("button",{onClick:function(){c()}},"add"),s.map(function(e){return r.a.createElement("div",{style:l===e._id?{fontWeight:"700"}:{},onClick:function(){i(e)}},r.a.createElement("span",{style:{cursor:"pointer"}},e.name))})),r.a.createElement("div",{className:"col-md-8"},(o||[]).map(function(e){return r.a.createElement("div",null,"".concat(e.user.name," ").concat(e.text))}),r.a.createElement(N,{formData:t,onChange:n,schema:[{name:"text",path:"text"}]}),r.a.createElement("button",{onClick:function(){a()}},"send")))}}]),t}(a.Component),Je=Object(U.a)(qe),Ye=(n(569),ye()("",{path:"/api/chat"})),Ze=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).createChannel=function(){n.props.createChannel(n.state.roomName),Ye.emit("new channel",n.state.roomName)},n.logIn=function(){var e=n.props.location.pathname.split("/")[1],t=n.props.users.find(function(t){return t._id===e});console.log(t);var a={text:n.state.text,user:{id:e,name:t.name},channelID:n.props.activeChannel.id,time:new Date};console.log(a),Ye.emit("send message",a),n.props.sendMsg(a),n.props.getMessages(n.props.activeChannel.id)},n.changeChannel=function(e){Ye.emit("leave channel",n.props.activeChannel),Ye.emit("join channel",e),n.setState(function(t){return{activeChannel:t.activeChannel===e._id?null:e._id}}),n.props.changeChannel(e),n.props.getMessages(e._id)},n.state={roomName:"",text:"",messages:[],activeChannel:null},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getChannels(),this.props.getUsersList(),!0===(this.props.user||{}).isAuthenticated&&this.props.getCurrentUser(),Ye.emit("chat mounted",this.props.user),this.props.getChannels(),Ye.on("receive socket",function(t){return e.props.receiveSocket(t)}),Ye.on("new channel",function(t){console.log(t),e.props.getChannels()}),Ye.on("new message",function(t){e.props.getMessages(e.props.activeChannel.id)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.chatRooms,a=(t.messages,t.channels);return r.a.createElement(Je,{channels:a,activeChannel:this.state.activeChannel,changeChannel:this.changeChannel,createChannel:this.createChannel,messages:this.props.messages,socket:Ye,formData:this.state,chatRooms:n,onChange:function(t){return e.setState(t)},action:this.logIn})}}]),t}(a.Component);var Qe=Object(g.b)(function(e,t){return{chatRooms:e.chatRooms.data,message:e.message,messages:e.messages,user:e.user,channels:e.channels,activeChannel:e.activeChannel,users:e.users}},function(e){return{createChannel:function(t){return e(pe.createChannel(t))},getChatRoomsList:function(){return e(le.getChatRoomsList())},sendMsg:function(t){return e(le.sendMsg(t))},getMessage:function(t){return e(le.getMessage(t))},receiveSocket:function(t){return e(le.receiveSocket(t))},getCurrentUser:function(){return e(je.getCurrentUser())},getChannels:function(){return e(pe.getChannels())},changeChannel:function(t){return e(pe.changeChannel(t))},getMessages:function(t){return e(le.getMessages(t))},getUsersList:function(){return e(_.getUsersList())}}})(Ze),$e=(a.Component,function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.formData,n=e.onChange,a=e.action;return r.a.createElement("div",null,r.a.createElement(N,{formData:t,onChange:n,schema:[{name:"chatMsg",path:"chatMsg"},{name:"msgBy",path:"msgBy"}]}),r.a.createElement("button",{onClick:function(){a()}},"send"))}}]),t}(a.Component)),Xe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).sendMsg=function(){n.props.sendMsg(n.state,n.props.chatId)},n.state={chatMsg:"",msgBy:""},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement($e,{formData:this.state,onChange:function(t){return e.setState(t)},action:this.sendMsg})}}]),t}(a.Component);var et=Object(g.b)(function(e,t){return{}},function(e){return{sendMsg:function(t,n){return e(le.sendMsg(t,n))}}})(Xe),tt=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(et,{chatId:this.props.match.params.chatListId})}}]),t}(a.Component),nt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onDragStart=function(e,t){console.log(e,t),e.dataTransfer.setData("id",t)},n.onDragOver=function(e){console.log(e),e.preventDefault()},n.onDrop=function(e,t){var a=e.dataTransfer.getData("id"),r=n.state.books.filter(function(e){return e._id==a&&(e.state=t),e});n.setState({books:r}),n.props.changed(a,t)},n.state={books:""},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){e.books!==this.props.books&&this.setState({books:this.props.books})}},{key:"render",value:function(){var e=this,t={unread:[],inProgess:[],complete:[]};return this.state.books.length>0?(this.state.books||[]).forEach(function(n){(t[n.state]||[]).push(r.a.createElement("div",{key:n.id,onDragStart:function(t){return e.onDragStart(t,n._id)},draggable:!0,className:"draggable",style:{backgroundColor:n.bgcolor}},r.a.createElement("div",null," ",r.a.createElement("span",{className:"title-sm"},"TYTU\u0141: "),n.title)))}):t={},console.log(t),r.a.createElement("div",{className:"container-drag"},r.a.createElement("div",{className:"wip",onDragOver:function(t){return e.onDragOver(t)},onDrop:function(t){e.onDrop(t,"unread")}},r.a.createElement("span",{className:"book-header"},"OCZEKUJ\u0104CE"),t.unread),r.a.createElement("div",{className:"inProgess",onDragOver:function(t){return e.onDragOver(t)},onDrop:function(t){e.onDrop(t,"inProgess")}},r.a.createElement("span",{className:"book-header"},"W TRAKCIE"),t.inProgess),r.a.createElement("div",{className:"droppable",onDragOver:function(t){return e.onDragOver(t)},onDrop:function(t){return e.onDrop(t,"complete")}},r.a.createElement("span",{className:"book-header"},"GOTOWE"),t.complete))}}]),t}(a.Component),at=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).changed=function(e,t){n.props.updateBookStatus(e,t)},n.state={chatMsg:"",msgBy:""},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getBooksList()}},{key:"render",value:function(){var e=this.props.books;return r.a.createElement(nt,{changed:this.changed,books:e})}}]),t}(a.Component);var rt=Object(g.b)(function(e,t){return{books:e.books.filter(function(e){return e.user===t.location.pathname.split("/")[1]})}},function(e){return{getBooksList:function(t){return e(se.getBooksList(t))},updateBookStatus:function(t,n){return e(se.updateBookStatus(t,n))}}})(at),ot=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(rt,{location:this.props.location})}}]),t}(a.Component),ct=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){this.props.match.path;return r.a.createElement("div",null,r.a.createElement(Te,null,r.a.createElement(m.a,null,r.a.createElement(d.a,{exact:!0,path:"/",component:Ae}),r.a.createElement(d.a,{exact:!0,path:"/:user",component:Ae}),r.a.createElement(d.a,{exact:!0,path:"/:user/myBooks",component:Fe}),"          ",r.a.createElement(d.a,{exact:!0,path:"/:user/planner",component:ot}),r.a.createElement(d.a,{exact:!0,path:"/profile/:user",component:We}),r.a.createElement(d.a,{exact:!0,path:"/chatDetail/:chatListId",component:tt}))))}}]),t}(a.Component),st=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(m.a,null,r.a.createElement(d.a,{path:"/registration/",component:G}),r.a.createElement(d.a,{path:"/login/",component:Se}),r.a.createElement(d.a,{path:"/",component:ct})))}}]),t}(a.Component),it=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(st,null)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var lt=n(230);c.a.render(r.a.createElement(g.a,{store:fe},r.a.createElement(lt.a,{loading:null,persistor:be},r.a.createElement("span",null,r.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css",integrity:"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u",crossOrigin:"anonymous"}),r.a.createElement(it,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[236,2,1]]]);
//# sourceMappingURL=main.02693433.chunk.js.map